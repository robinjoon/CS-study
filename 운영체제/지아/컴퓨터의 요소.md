## 2. 컴퓨터의 요소
- 컴퓨터는 **CPU, DMA, 컨트롤러, 메모리, 타이머, 디바이스 컨트롤러** 등으로 이루어져 있다.

### CPU
- CPU는 산술논리연산장치, 제어장치, 레지스터로 구성되어 있는 컴퓨터 장치를 말하며, 인터럽트에 의해 단순히 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼이다.

### 제어장치
- 제어장치는 프로세스 조작을 지시하는 CPU의 한 부품이다. 입출력장치 간 통신을 제어하고 명령어들을 읽고 해석하며 데이터 처리를 위한 순서를 결정한다.

### 레지스터
- 레지스터는 CPU 안에 있는 매우 빠른 임시기억장치를 가르킨다. CPU는 직접 연결되어 있으므로 연산 속도가 메모리보다 수십 배에서 수백 배까지 빠르다.
- CPU는 자체적으로 데이터를 저장할 방법이 없기 때문에, 레지스터를 거쳐 데이터를 전달한다.

##### 산술논리연산장치
- 산술논리연산장치는 덧셈, 뺄셈 같은 두 숫자의 산술 연산과 배타적 논리합, 논리곱 같은 논리 연산을 계산하는 디지털 회로이다.

### 인터럽트(Interrupt)
- 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우 현재 실행 중인 작업을 즉시 중단하고, 발생된 상황에 대한 우선 처리가 필요함을 CPU에게 알리는 것이다.
- 지금 수행 중인 일보다 더 중요한 일(ex. 입출력, 우선 순위 연산 등)이 발생하면 그 일을 먼저 처리하고 나서 하던 일을 계속해야한다.
- 외부/내부(하드웨어) 인터럽트는 **CPU의 하드웨어 신호에 의해 발생**한다.
- 소프트웨어 인터럽트는 **명령어의 수행에 의해 발생**한다.

##### 외부 인터럽트
- 입출력 장치, 타이밍 장치, 전원 등 외부적인 요인으로 발생한다.
    - 전원 이상, 기계 착오, 외부 신호, 입출력

##### 내부 인터럽트
- Trap이라고 부르며, 잘못된 명령이나 데이터를 사용할 때 발생한다.
    - 0으로 나누기가 발생, 오버플로우, 명령어를 잘못 사용한 경우 (Exception)

##### 소프트웨어 인터럽트
- 프로그램 처리 중 명령의 요청에 의해 발생한 것 (SVC 인터럽트)이다.
    - 사용자가 프로그램을 실행시킬 때 발생
    - 소프트웨어 이용 중에 다른 프로세스를 실행시키면 시분할 처리를 위해 자원 할당 동작이 수행된다.

#### 인터럽트 발생 처리 과정
1. 주 프로그램이 실행되다가 인터럽트가 발생했다.
2. 현재 수행 중인 프로그램을 멈추고, 상태 레지스터와 PC 등을 스택에 잠시 저장한 뒤에 인터럽트 서비스 루틴으로 간다. (잠시 저장하는 이유는, 인터럽트 서비스 루틴이 끝난 뒤 다시 원래 작업으로 돌아와야 하기 때문)
3. 만약 인터럽트 기능이 없었다면, 컨트롤러는 특정한 어떤 일을 할 시기를 알기 위해 계속 체크를 해야 한다. (이를 **폴링(Polling)**이라고 한다)
4. 폴링을 하는 시간에는 원래 하던 일에 집중할 수가 없게 되어 많은 기능을 제대로 수행하지 못하는 단점이 있었다.

- 컨트롤러가 입력을 받아들이는 방법(우선순위 판별방법)에는 두가지가 있다.

##### 폴링 방식
- 사용자가 명령어를 사용해 입력 핀의 값을 계속 읽어 변화를 알아내는 방식
- 인터럽트 요청 플래그를 차례로 비교하여 우선순위가 가장 높은 인터럽트 자원을 찾아 이에 맞는 인터럽트 서비스 루틴을 수행한다. (하드웨어에 비해 속도 느림)

##### 인터럽트 방식
- MCU 자체가 하드웨적으로 변화를 체크하여 변화 시에만 일정한 동작을 하는 방식
    - Daisy Chain
    - 병렬 우선순위 부여

- 인터럽트 방식은 하드웨어로 지원을 받아야 하는 제약이 있지만, 폴링에 비해 신속하게 대응하는 것이 가능하다. 따라서 **'실시간 대응'**이 필요할 때는 필수적인 기능이다.
- 즉, 인터럽트는 발생시기를 예측하기 힘든 경우에 컨트롤러가 가장 빠르게 대응할 수 있는 방법이다.

### DMA 컨트롤러
- DMA 컨트롤러는 I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치를 뜻한다. 
- CPU에만 너무 많은 인터럽트 요청이 들어오기 때문에 CPU 부하를 막아주며 CPU의 일을 부담하는 보조 일꾼이라고 생각하면 된다. 
- 또한, 하나의 작업을 CPU와 DMA 컨트롤러가 동시에 하는 것을 방지한다.

### 메모리
- 메모리는 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치를 말하며, 보통 RAM을 일컬어 메모리라고 한다. CPU는 계산을 담당하고, 메모리는 기억을 담당한다.

### 타이머
- 타이머는 몇 초 안에는 작업이 끝나야 한다는 것을 정하고 특정 프로그램에 시간을 제한을 다는 역할을 한다.
- 시간이 많이 걸리는 프로그램이 작동할 때 제한을 걸기 위해 존재한다.

### 디바이스 컨트롤러
- 다바이스 컨트롤러는 컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU를 말한다.
