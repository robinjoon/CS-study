## ERD와 정규화 과정
- ERD는 데이터베이스를 구축할 때 가장 기초적인 뼈대 역할을 하며, 릴레이션 간의 관계들을 정의한 것이다.

### 1. ERD의 중요성
- ERD는 시스템의 요구 사항을 기반으로 작성되며 이 ERD를 기반으로 데이터베이스를 구축한다.
- ERD는 관계형 구조로 표현할 수 있는 데이터를 구성하는 데 유용할 수 있지만, 비정형 테이터를 충분히 표현할 수 없다는 단점이 있다.
> 비정형 데이터란, 비구조화 데이터를 말하며, 미리 정의된 데이터 모델이 없거나 미리 정의된 방식으로 정리되지 않은 정보를 말한다. 비정형 정보는 일반적으로 텍스트 중심으로 되어 있으나 날짜, 숫자, 사실과 같은 데이터도 포함할 수 있다. 이로써 변칙과 모호함이 발생하므로 데이터베이스의 칸 형식의 폼에 저장되거나 문서에 주석화된 데이터에 비해 전통적인 프로그램을 사용하여 이해하는 것을 불가능하게 만든다.

### 2. ERD 예시
[ERD 예시 참고 블로그](<https://velog.io/@cil05265/E-R-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8ERD-%EC%9E%91%EC%84%B1-%ED%91%9C%EA%B8%B0%EB%B2%95-%EB%B0%8F-%EC%98%88%EC%8B%9C>)

### 3. 정규화 과정

- 정규화 과정은 릴레이션 간의 잘못된 종속 관게로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정이다. (예를 들어, 데이터베이스 안에 1억 개의 튜플이 들어있다고 가정하면 저장 공간도 크고 데이터 처리 시간도 길어질 것이다.)
- 정규화 과정은 정규형 원칙을 기반으로 정규형을 만들어가는 과정이며, 정규화된 정도는 정규형으로 표현한다.

> 정규형 원칙이란 좀 더 좋은 구조로 만들어야 하고, 자료의 중복성은 감소해야 하고, 독립적인 관계는 별개의 릴레이션으로 표현해야 하며, 각각의 릴레이션은 독립적인 표현이 가능해야 하는 것을 말한다.

- 기본 정규형인 제 1정규형, 제 2정규형, 제 3정규형, 보이스/코드 정규형이 있고 고급 정규형인 제 4정규형, 제 5정규형이 있다.
- 3차 정규화까지 알면 설계하는데 무리가 없다.


#### 1. 제 1정규화
- 엔티티에서 하나의 속성이 복수개의 값을 갖도록 설계되어 있을 때, 하나의 속성이 단일 값(atomic value)을 갖도록 설계를 변경하는 과정
![](https://velog.velcdn.com/images/cil05265/post/210d1b8f-f926-4a0d-b635-66fd8741ade1/image.png)
![](https://velog.velcdn.com/images/cil05265/post/19dec73c-c83a-43f9-a7bd-3efd1f62e6ac/image.png)

#### 2. 제 2정규화
- 제2정규화는 PK가 여러 키로 구성된 복합키(Composite Primary Key)로 구성된 경우가 2차 정규화의 대상이 되며, 복합키 전체에 의존하지 않고 복합키의 일부분에만 종속되는 속성들이 존재할 경우 (즉, 부분적 함수 종속 관계) 이를 분리하는 것이다.

![](https://velog.velcdn.com/images/cil05265/post/684707f7-49a2-4c92-a5bf-14d60cfa8bee/image.png)

 1. 제 1정규화를 마친 테이블을 보면, 중복되는 레코드(적갈색)가 보인다.
 2. 저 부분이 중복되어 나타나는 이유는 type와 price 필드 값이 각기 다르기 때문이다.
 3. 그러면 각기 다른 부분을 테이블로 나누고 중복부분을 하나로 표현되게 한다.
 4. 먼저 중복이 나타나게 한 원인 필드인 type와 price 필드를 따로 빼서 topic_type테이블을 만든다.
 5. 그리고 topic_type에서 식별할수 있는 외래키 title을 등록해준다.
 6. 이렇게 하면, 중복되는 것 없이 title이 mySQL이냐 아니냐에 따라 topic 테이블에선 저자정보, topic_type테이블에선 가격과 타입을 각각 나타낼수 있게 된다.

#### 3. 제 3정규화
- 테이블의 키가 아닌 컬럼들은 기본키에 의존해야 하는데 겉으로는 그런 것처럼 보이지만 실제로는 기본키가 아닌 다른 일반 컬럼에 의존하는 컬럼들이 있을 수 있다. 이를 (이전적 함수 종속 관계)라고 한다. 제 3정규화는 PK에 의존하지 않고 일반컬럼에 의존하는 컬럼들을 분리한다.

![](https://velog.velcdn.com/images/cil05265/post/8c99a198-d85f-49cc-b3a0-1281c15f512e/image.png)


 1. 제 2정규화를 마쳤지만 여전히 중복된 값(노란색) 이 보인다.
 2. 저 레코드는 author_id에 의존하는 컬럼들이다. 언뜻보면 title에 의존하는것처럼 보이지만 아니다.
 3. 그럼 PK(title)에 의존하지 않는 컬럼들을 분단시킨다.
 4. author라는 테이블을 만들고 중복되는 컬럼들 3개를 그대로 따온다. 그리고 topic테이블과 author_id로 외래키 관계를 맺어준다. 그러면 중복이 사라지는것을 볼 수 있다.

#### 4. 역정규화
- 논리적 정규화를 통해 만든 표를, 개발적 측면에서 성능이나 편의성을 위해서 되돌아가는 작업을 일컫는다.
- 역정규화 방법으로 JOIN을 줄이기, 계산 작업을 줄이기, 테이블 분리, 외래키 줄이기 등의 방법이 있다.

#### 5. 보이스 코드 정규화(BCNF)
- 관계형 데이터베이스의 릴레이션 R에서 함수 종속성 X→Y가 성립할 때, 모든 결정자 X가 후보키이면 BCNF 정규형이 된다. 즉, 식별자로 쓰이는 속성이 일반속성에 종속되지 않아야 한다.
- 제3정규화를 통해서도 제거되지 않은 데이터의 중복 문제를 해결해 주기 때문에 일명 ‘제3.5정규화’라고도 부른다.
