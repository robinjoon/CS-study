# 데이터베이스의 종류

## 관계형 데이터베이스(RDBMS)
행과 열을 가지는 표 형식으로 데이터를 저장하는 데이터베이스. SQL 이라는 언어를 사용해 DB를 조작한다.
### 특징
1. SQL 을 이용해 DB를 사용한다.
### 장점
1. 데이터의 분류, 정렬, 탐색 속도가 빠릅니다.
2. 오랫동안 사용된 만큼 신뢰성이 높고, 어떤 상황에서도 데이터의 무결성을 보장해 줍니다.
### 단점
1. 데이터 스키마가 미리 정의되어있어야 한다.
    - 스키마의 변경이 매우 어렵다.
    - 스키마를 정의하기 힘든 종류의 데이터를 저장할 수 없다.
2. 데이터 사이의 복잡한 관계가 join 으로 표현되는데, 성능상의 문제가 생길 수 있다.

## 비 관계형 데이터베이스 (NoSQL DB)
Not only SQL 이라는 슬로건에서 생겨난 데이터베이스. SQL 을 사용하지 않는 데이터베이스를 말한다.
관계형 데이터베이스가 다루기 힘든 영역을 다루기에 적합하다.

### MongoDB
JSON 을 이용해 데이터에 접근할 수 있다. RDB와 다르게 데이터의 스키마가 미리 정해지지 않은 동적 스키마 방식을 사용한다.
### 특징
- 데이터의 기본 단위를 Document 라고 부른다. RDB의 Row 와 대응된다.
- Document 의 집합을 Collection 이라고 한다. RDB의 테이블과 대응된다.
- ObjectID 라는 고유값을 이용해 도큐먼트를 구분할 수 있다. Primary Key에 해당한다.
- RDB의 ACID 원칙 대신 BASE 라는 원칙을 내새운다.

### 장점
1. 스키마가 유연하다.
    - 스키마를 미리 정하기 힘든 빅데이터를 저장하기에 적합하다.
2. RDB에 비해 속도가 월등히 빠르다.
    - ACID 를 완화한 대가이다.
3. 분산 확장이 용이하다.

### 단점
1. 데이터의 완전한 무결성을 보장하지 않는다.
    - ACID 원칙 대신 BASE 원칙을 따르는 대가이다.

### ACID 원칙
- 원자성(Atomicity) : 트랜잭션의 일부만 수행되는 경우는 없어야 한다.
- 일관성(Consistency) : 트랜잭션 전후 모두 데이터베이스의 상태는 유효해야 한다.
- 격리성(Isolation) : 각 트랜잭션은 다른 트랜잭션과 독립되어 수행되며, 다른 트랜잭션에 끼어들 수 없다.
- 지속성(Durability) : 한번 반영된 트랜잭션은 영구적으로 언제나 반영되어있어야 한다.
### CAP 이론
아래 3가지 성질을 동시에 만족하는 분산 시스템은 불가능 하다는 이론.

<img src="https://user-images.githubusercontent.com/14002238/112651209-86533680-8e8f-11eb-9579-2d9a2389ce27.png">

- 일관성 (Consistency) : 모든 시스템의 데이터는 어떤 순간에 항상 같은 데이터를 갖는다.
- 가용성 (Availability) : 분산 시스템에 대한 모든 요청은 내용 혹은 성공/실패에 상관없이 응답을 반환할 수 있다.
- 내구성 (Partition Tolerance) : 네트워크 장애 등 여러 상황에서도 시스템은 동작할 수 있다.

위의 3가지 성질을 모두 만족할 수 없고, 일반적으로 다음과 같이 선택된다.

- CP (Consistency & Partition Tolearance) : 
    어떤 상황에서도 안정적으로 시스템은 운영되지만 Consistency 가 보장되지 않는다면 Error를 반환한다. (어떤 경우에도 데이터가 달라져서는 안된다.)
    * 이는 매 순간 Read/Write에 따른 정합성이 일치할 필요가 있는 경우 적합한 형태이다.

- AP (Availability & Partition Tolerance) : 
    어떤 상황에서도 안정적으로 시스템은 운영된다. 또한 데이터와 상관없이 안정적인 응답을 받을 수 있다. 
    다만 데이터의 정합성에 대한 보장은 불가능하다. (특정 시점에 Write 동기화 여부에 따라 데이터가 달라질 수 있다.)
    * 이는 결과적으로는 일관성이 보장된다는 Eventual Consistency를 보장할 수 있는 시스템에 알맞는 형태이다.

### BASE 원칙
Basically Available, Soft state, Eventually Consistence 의 약자로, 가용성과 성능을 중요시하는 원칙.


분산 데이터베이스의 특징을 나타낸다. 관계형 데이터베이스의 ACID 원칙과 대비된다.(TMI: 그래서 BASE 라고 부른다. ACID = 산, BASE = 염기)
- Basically Available : 분산 시스템은 언제나 사용가능하다. 단, 올바른 응답을 보장하지는 않는다.
- Soft state : 
- Eventually Consistence : 일시적으로 일관성이 깨질 수 있다. 최종적으로는 일관성있게 돌아온다.